CREATE TABLE "PERSON" (
  "NAME" VARCHAR2(1000 CHAR) CONSTRAINT "PK_PERSON" PRIMARY KEY
);

CREATE TABLE "SONG" (
  "NAME" VARCHAR2(1000 CHAR) CONSTRAINT "PK_SONG" PRIMARY KEY
);

CREATE TABLE "DANCE" (
  "ID" NUMBER(10) CONSTRAINT "PK_DANCE" PRIMARY KEY,
  "PERSON" VARCHAR2(1000 CHAR) NOT NULL,
  "SONG" VARCHAR2(1000 CHAR) NOT NULL
);

CREATE INDEX "IDX_DANCE__PERSON" ON "DANCE" ("PERSON");

CREATE INDEX "IDX_DANCE__SONG" ON "DANCE" ("SONG");

ALTER TABLE "DANCE" ADD CONSTRAINT "FK_DANCE__PERSON" FOREIGN KEY ("PERSON") REFERENCES "PERSON" ("NAME");

ALTER TABLE "DANCE" ADD CONSTRAINT "FK_DANCE__SONG" FOREIGN KEY ("SONG") REFERENCES "SONG" ("NAME");

CREATE SEQUENCE "DANCE_SEQ" NOCACHE;

CREATE TRIGGER "DANCE_BI"
  BEFORE INSERT ON "DANCE"
  FOR EACH ROW
BEGIN
  IF :new."ID" IS NULL THEN
    SELECT "DANCE_SEQ".nextval INTO :new."ID" FROM DUAL;
  END IF;
END;
